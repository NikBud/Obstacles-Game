(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function h(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(s){if(s.ep)return;s.ep=!0;const i=h(s);fetch(s.href,i)}})();class a{constructor(t,h){this.x=t,this.y=h,this.size=20,this.speed=10,this.lastX=t,this.lastY=h}moveUp(){this.lastY=this.y,this.y=Math.max(this.y-this.speed,0)}moveDown(){this.lastY=this.y,this.y=Math.min(this.y+this.speed,800-this.size)}moveLeft(){this.lastX=this.x,this.x=Math.max(this.x-this.speed,0)}moveRight(){this.lastX=this.x,this.x=Math.min(this.x+this.speed,1e3-this.size)}cancelLastMove(t){t==="ArrowUp"||t==="ArrowDown"?this.y=this.lastY:(t==="ArrowRight"||t==="ArrowLeft")&&(this.x=this.lastX)}collidesWith(t){return this.x<t.x+t.width&&this.x+this.size>t.x&&this.y<t.y+t.height&&this.y+this.size>t.y}draw(t){t.fillStyle="#ffcc00",t.fillRect(this.x,this.y,this.size,this.size)}}class o{constructor(t,h){this.x=t,this.y=h,this.width=40,this.height=40}draw(t){t.fillStyle="#ef4444",t.fillRect(this.x,this.y,this.width,this.height)}get bounds(){return{x:this.x,y:this.y,width:this.width,height:this.height}}}class e{constructor(t,h,l,s){this.x=t,this.y=h,this.width=l,this.height=s}draw(t){t.fillStyle="#00ff7f",t.fillRect(this.x,this.y,this.width,this.height)}}class c{constructor(t){this.canvas=t,this.ctx=t.getContext("2d"),this.player=new a(50,50),this.exit=new o(t.width-70,t.height-70),this.obstacles=[],this.currentLevel=1,this.setupKeyboardButtons(),this.setUpLevel(this.currentLevel)}setupKeyboardButtons(){window.addEventListener("keydown",t=>{switch(t.key){case"ArrowUp":this.player.moveUp();break;case"ArrowDown":this.player.moveDown();break;case"ArrowLeft":this.player.moveLeft();break;case"ArrowRight":this.player.moveRight();break}this.checkCollisions(t.key),this.update()})}setUpLevel(t){switch(this.obstacles=[],this.player.x=50,this.player.y=50,t){case 1:this.obstacles=[new e(200,150,30,500),new e(500,100,30,600),new e(800,300,30,500),new e(100,400,800,25)];break;case 2:this.obstacles=[new e(100,80,30,800),new e(400,0,30,250),new e(400,450,30,350),new e(600,0,30,250),new e(600,450,30,350),new e(200,250,600,25),new e(200,450,600,25)];break;case 3:this.obstacles=[new e(90,40,900,20),new e(90,770,900,20),new e(90,40,20,650),new e(970,40,20,750),new e(150,150,700,20),new e(150,250,20,200),new e(250,350,600,20),new e(850,40,20,400),new e(400,450,400,20),new e(500,400,20,370),new e(300,650,500,20)];break;case 4:this.obstacles=[new e(90,40,50,20),new e(160,40,810,20),new e(90,770,900,20),new e(90,40,20,750),new e(970,40,20,750),new e(150,100,700,20),new e(150,200,20,250),new e(250,300,600,20),new e(850,40,20,240),new e(400,400,400,20),new e(500,200,20,250),new e(700,360,20,410),new e(300,600,500,20),new e(200,500,20,150),new e(600,650,20,120),new e(400,700,550,20)];break}}checkCollisions(t){for(const h of this.obstacles)if(this.player.collidesWith(h)){this.player.cancelLastMove(t);return}this.player.collidesWith(this.exit)&&(this.currentLevel<4?(this.currentLevel++,this.setUpLevel(this.currentLevel)):(alert("Congratulations! You completed all levels!"),this.currentLevel=1,this.setUpLevel(1)))}update(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="#1a1a1a",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="#ffffff",this.ctx.font="30px Arial",this.ctx.fillText(`Level ${this.currentLevel}`,20,40),this.exit.draw(this.ctx),this.obstacles.forEach(t=>t.draw(this.ctx)),this.player.draw(this.ctx)}start(){this.update()}}window.onload=()=>{const r=document.getElementById("gameCanvas");new c(r).start()};
